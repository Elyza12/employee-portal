<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Awi Employee Portal</title>

<!-- Animate.css -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<style>
/* ===== Modern UI Animations & Transitions ===== */

.fade-up {
  opacity: 0;
  transform: translateY(20px);
  animation: fadeUp 0.8s ease forwards;
}
@keyframes fadeUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

button {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
button:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

input:focus {
  outline: none;
  border-color: #336699;
  box-shadow: 0 0 8px rgba(51, 102, 153, 0.25);
}

#irTable tr:hover td {
  background: #eef5fc;
  transition: background 0.2s ease;
}

.animate-fade-in {
  opacity: 0;
  animation: fadeInCustom 0.8s ease forwards;
}
@keyframes fadeInCustom {
  to { opacity: 1; }
}

/* ===== ORIGINAL STYLES (UNCHANGED) ===== */
section { display:none; padding:20px; max-width:900px; margin:20px auto; background:white; border-radius:8px; box-shadow:0 0 10px #ccc; }
body { font-family: Arial,sans-serif; background:#f4f4f4; margin:0; padding:0; }
header { background:#0077cc; color:white; padding:20px; text-align:center; }
table { width:100%; border-collapse:collapse; margin-top:10px; }
th, td { border:1px solid #ddd; padding:10px; text-align:left; }
th { background:#0077cc; color:white; }
td { background:#f9f9f9; }
input { width:100%; padding:10px; margin:5px 0; box-sizing:border-box; }
button { background:#0077cc; color:white; border:none; padding:12px; cursor:pointer; width:100%; margin-top:10px; border-radius:5px; font-size:16px; }
button:hover { background:#005fa3; }
img.sched { width:100%; max-width:1000px; border:1px solid #ccc; border-radius:8px; margin-top:10px; }
  #login {
  display: block;
}
  #portal{
    display: none;
  }
  #login form{
    opacity: 0;
    transform: scale(0.92) translateY(20px);
    animation: mobileZoomIn 0.6s ease-out forwards;
  }
  @keyframes mobileZoomIn{
    to{
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }
  .animate__zoomIn {
    animation: none; !important;
  }
  #requestFormSection, #adminPanel{
    display:none;
  }
</style>
</head>

<body>
<header class="animate__animated animate__fadeInDown">
Awi Employee Portal
</header>

<section id="login" class="animate__animated animate__zoomIn">
    <h2>Login</h2>
    <form id="loginForm">
        <input type="text" id="username" placeholder="First Name" required>
        <input type="password" id="password" placeholder="Password" required>
        <button type="submit">Login</button>
    </form>
    <p id="loginMessage" style="color:red;"></p>
</section>

<section id="portal">
    <h2>Welcome, <span id="employeeName"></span></h2>

    <h3>Work Schedule</h3>
    <img src="sched.png" alt="Sched" class="sched animate__animated animate__fadeIn">

    <h3>Incident Reports</h3>
    <table id="irTable">
        <tr><th>Date</th><th>Incident</th><th>Status</th><th>Note</th></tr>
    </table>
    <p><em>Note: All IRs are renewed after 6 months from the incident date.</em></p>

    <input type="password" id="newPassword" placeholder="New Password">
    <button onclick="changePassword()">Update Password</button>

    <button onclick="openRequestForm()">Request Off</button>

    <button style="margin-top:20px;" onclick="logout()">Logout</button>
</section>

  <section id="requestFormSection">
    <h2>Request Day Off</h2>

    <label>Select Date (Monday–Thursday only)</label>
    <input type="date" id="offDate">

    <label>Reason</label>
    <textarea id="offReason" style="width:100%; padding:10px;"></textarea>

    <button onclick="submitRequest()">Submit Request</button>
    <button onclick="closeRequestForm()">Cancel</button>
</section>

<section id="adminPanel">
    <h2>Admin — Request Off List</h2>

    <table id="requestTable">
        <tr>
            <th>Employee</th>
            <th>Date</th>
            <th>Reason</th>
            <th>Time Requested</th>
            <th>Status</th>
        </tr>
    </table>

    <button onclick="logout()">Logout</button>
</section>


<script>
document.addEventListener("DOMContentLoaded", function(){
    document.getElementById('login').style.display = 'block';

    document.getElementById("offDate").addEventListener("input", function(){
 const d = new Date(this.value).getDay();
 if(d === 0 || d === 5 || d === 6){
  alert("Only Monday to Thursday allowed");
  this.value="";
 }
});

 window.submitRequest = async function(){

 const date = document.getElementById("offDate").value;
 const reason = document.getElementById("offReason").value;
 const user = document.getElementById("employeeName").innerText;

 if(!date || !reason){
  alert("Complete fields");
  return;
 }

 const sheetID = "1U6X-cXYwAMintVG2WAh4GtWkGYG_ZTxh3whPhqWXKN0";
 const apiKey = "AIzaSyBfdg9nTmIN2-tleT3YXMCP8jI49wWFKlQ";

 const url =
 `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/RequestOff!A:E:append?valueInputOption=USER_ENTERED&key=${apiKey}`;

 const body = {
   values: [[
     user,
     date,
     reason,
     new Date().toLocaleString(),
     "Pending"
   ]]
 };

 await fetch(url,{
   method:"POST",
   headers:{ "Content-Type":"application/json" },
   body: JSON.stringify(body)
 });

 alert("Request Saved Permanently ✅");

 closeRequestForm();
}

async function loadRequests(){

 const sheetID = "1U6X-cXYwAMintVG2WAh4GtWkGYG_ZTxh3whPhqWXKN0";
 const apiKey = "AIzaSyBfdg9nTmIN2-tleT3YXMCP8jI49wWFKlQ";

 const url =
 `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/RequestOff!A:E?key=${apiKey}`;

 const res = await fetch(url);
 const data = await res.json();

 const table = document.getElementById("requestTable");

 table.innerHTML =
 `<tr>
  <th>Employee</th>
  <th>Date</th>
  <th>Reason</th>
  <th>Time Requested</th>
  <th>Status</th>
 </tr>`;

 if(!data.values) return;

 data.values.slice(1).forEach(r=>{
   let row = table.insertRow();
   row.insertCell(0).innerText = r[0] || "";
   row.insertCell(1).innerText = r[1] || "";
   row.insertCell(2).innerText = r[2] || "";
   row.insertCell(3).innerText = r[3] || "";
   row.insertCell(4).innerText = r[4] || "Pending";
 });
}



  window.markDone = function(index){
 let list = JSON.parse(localStorage.getItem("offRequests")) || [];

 list[index].done = true;

 localStorage.setItem("offRequests", JSON.stringify(list));

 loadRequests();
}



    const employees = {
        admin:{password:'admin1234',role:'admin',irs:[]},
        elyza:{ password:'1234', irs:[]},
        eliza:{ password:'1234', irs:[{date:'January 23, 2026',incident:'Food Violation Policy',status:'IR SERVED',note:'Warning for Suspension'}]},
        rachelle:{ password:'1234', irs:[] },
        ramy:{ password:'1234', irs:[{date:'November 16, 2025',incident:'AWOL',status:'IR SERVED',note:'Warning for Suspension'}]},
        penales:{ password:'1234', irs:[] },
        joshua:{ password:'1234', irs:[] },
        ramos:{ password:'1234', irs:[{date:'January 23, 2026',incident:'Food Violation Policy',status:'IR SERVED',note:'Warning for Suspension'}]},
        jules:{ password:'1234', irs:[{date:'January 23, 2026',incident:'Food Violation Policy',status:'IR SERVED',note:'Warning for Suspension'}]},
        rulona:{ password:'1234', irs:[{date:'January 23, 2026',incident:'Food Violation Policy',status:'IR SERVED',note:'Warning for Suspension'}]},
        dave:{ password:'1234', irs:[{date:'January 23, 2026',incident:'Food Violation Policy',status:'IR SERVED',note:'Warning for Suspension'}]},
        jm:{ password:'1234', irs:[{date:'December 12, 2025',incident:'AWOL',status:'IR SERVED',note:'Warning for Suspension'}]},
        allan:{ password:'1234', irs:[{date:'January 1, 2026',incident:'Tardiness',status:'IR SERVED',note:'Warning for Suspension'}]},
        michael:{ password:'1234', irs:[
            {date:'November 16, 2025',incident:'AWOL',status:'IR SERVED',note:'Warning for Suspension'},
            {date:'December 2–4, 2025',incident:'.',status:'SUSPENDED',note:'Warning for Termination'}
        ]},
        valerie:{ password:'1234', irs:[
            {date:'November 20, 2025',incident:'AWOL',status:'IR SERVED',note:'Warning for Suspension'},
            {date:'January 23, 2026',incident:'Food Violation Policy',status:'IR SERVED',note:'Warning for Termination'}
        ]},
        cm:{ password:'1234', irs:[{date:'February 1, 2026',incident:'AWOL',status:'IR SERVED',note:'Warning for Suspension'}]}
    };

    document.getElementById('loginForm').addEventListener('submit', function(e){
        e.preventDefault();
        const user = document.getElementById('username').value.trim().toLowerCase();
        const pass = document.getElementById('password').value;

          if (employees[user] && employees[user].password === pass) {

    if(employees[user].role === "admin"){
        document.getElementById('login').style.display = 'none';
        document.getElementById('adminPanel').style.display = 'block';
        loadRequests();
        return;
    }

    document.getElementById('login').style.display = 'none';
    document.getElementById('portal').style.display = 'block';

    document.getElementById('employeeName').innerText =
    user.charAt(0).toUpperCase() + user.slice(1);

    loadIR(user);
}
 else {
            document.getElementById('loginMessage').innerText = 'Invalid username or password';
        }
    });

    function loadIR(user){
        const table = document.getElementById('irTable');
        table.innerHTML = '<tr><th>Date</th><th>Incident</th><th>Status</th><th>Note</th></tr>';
        employees[user].irs.forEach(ir=>{
            const row = table.insertRow();
            row.insertCell(0).innerText = ir.date;
            row.insertCell(1).innerText = ir.incident;
            row.insertCell(2).innerText = ir.status;
            row.insertCell(3).innerText = ir.note;
        });
    }

    window.logout = function(){
    document.getElementById('portal').style.display='none';
    document.getElementById('adminPanel').style.display='none';
    document.getElementById('requestFormSection').style.display='none';

    document.getElementById('login').style.display='block';

    document.getElementById('username').value='';
    document.getElementById('password').value='';
    document.getElementById('loginMessage').innerText='';
}


    window.changePassword = function(){
        const newPass = document.getElementById('newPassword').value;
        const user = document.getElementById('employeeName').innerText.toLowerCase();

        if(!newPass){
            alert('Enter a new password');
            return;
        }

        if(newPass === employees[user].password){
            alert('New password must be different from the old one');
            return;
        }

        employees[user].password = newPass;
        alert('Password updated successfully!');
        document.getElementById('newPassword').value = '';
    }
    window.openRequestForm = function(){
 document.getElementById('portal').style.display='none';
 document.getElementById('requestFormSection').style.display='block';
}

window.closeRequestForm = function(){
 document.getElementById('requestFormSection').style.display='none';
 document.getElementById('portal').style.display='block';
}

});
</script>

<!-- WOW.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
<script>
new WOW().init();
</script>

</body>
</html>

















